<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="planDataMapper">

<!-- 	<insert id="insertPlanData" parameterType="arrayList"> -->
<!-- 		INSERT ALL -->
<!-- 		<foreach collection="list" item="PlanData"> -->
<!-- 			INTO PLAN_DATA(PLAN_NO -->
<!-- 						  ,PLANNER_NO -->
<!-- 						  ,DAY -->
<!-- 						  ,NAME -->
<!-- 						  ,TIME -->
<!-- 						  ,INTRO -->
<!-- 						  ,MAPX -->
<!-- 						  ,MAPY -->
<!-- 						  ,FIRST_IMAGE) -->
<!-- 			VALUES(SEQ_PLAN.NEXTVAL -->
<!-- 				  ,#{PlanData.plannerNo} -->
<!-- 				  ,#{PlanData.day} -->
<!-- 				  ,#{PlanData.name} -->
<!-- 				  ,#{PlanData.time} -->
<!-- 				  ,#{PlanData.intro} -->
<!-- 				  ,#{PlanData.mapx} -->
<!-- 				  ,#{PlanData.mapy} -->
<!-- 				  ,#{PlanData.firstImage})						  -->
<!-- 		</foreach> -->
<!-- 		SELECT * FROM DUAL -->
<!-- 	</insert> -->

	<insert id="insertPlanData" parameterType="arrayList">
	    DECLARE
	        v_plan_no NUMBER;
	    BEGIN
	        <foreach collection="list" item="PlanData">
	            SELECT SEQ_PLAN.NEXTVAL INTO v_plan_no FROM dual;
	            INSERT INTO PLAN_DATA (
	                PLAN_NO,
	                PLANNER_NO,
	                DAY,
	                NAME,
	                TIME,
	                INTRO,
	                MAPX,
	                MAPY,
	                FIRST_IMAGE
	            ) VALUES (
	                v_plan_no,
	                #{PlanData.plannerNo},
	                #{PlanData.day},
	                #{PlanData.name},
	                #{PlanData.time},
	                #{PlanData.intro},
	                #{PlanData.mapx},
	                #{PlanData.mapy},
	                #{PlanData.firstImage}
	            );
	        </foreach>
	    END;
	</insert>
</mapper>